<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Block Runner ‚Äî –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –í–µ—Ä—Å—ñ—è</title>
  <link rel="manifest" href="manifest.json">
<link rel="icon" href="icons/icon.png" type="image/png">
<link rel="apple-touch-icon" href="icons/icon.png">
<meta name="theme-color" content="#000000">
  <style>
    :root{--bg:#000;--panel:#111;--accent:#0f0;--muted:#999}
    html,body{height:100%;margin:0;background:var(--bg);color:#fff;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;user-select:none;overflow:hidden}
    .screen{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column}
    h1{margin:8px 0;font-size:28px}
    p{margin:6px 0;color:var(--muted)}
    button{background:var(--accent);color:#000;border:none;padding:10px 18px;border-radius:10px;font-size:16px;cursor:pointer}
    canvas{display:block;background:#000;width:100%;height:100%}
    #ui{position:fixed;top:10px;left:0;width:100%;text-align:center;font-size:16px;z-index:5}
    #ui span{background:rgba(0,0,0,0.3);padding:6px 10px;border-radius:8px;margin:0 6px}
    /* –°—Ç–∏–ª—ñ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—ñ–≤ —Ç–∞ –∫–Ω–æ–ø–∫–∏ –ø–∞—É–∑–∏ */
    #ui .controls { display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 10px; }
    #ui .controls button { padding: 6px 10px; border-radius: 8px; background: rgba(255,255,255,0.1); color: #fff; font-size: 16px; }
    /* –°—Ç–∏–ª—å –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –ø–∞—É–∑–∏ */
    .pause-modal { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7); display: none; align-items: center; justify-content: center; z-index: 55; }
    .pause-content { background: var(--panel); border-radius: 12px; padding: 30px; text-align: center; box-shadow: 0 0 20px rgba(0, 255, 0, 0.2); }
    .pause-content h2 { color: var(--accent); margin-top: 0; }
    .small{font-size:13px;color:var(--muted)}
    .buttons{display:flex;gap:12px;margin-top:12px;flex-wrap:wrap;justify-content:center;}
    /* Console styles */
    .console-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:flex-end;justify-content:center;padding:20px;z-index:50}
    .console{background:#0b0b0b;border:1px solid #222;border-radius:12px;width:100%;max-width:820px;max-height:70vh;display:flex;flex-direction:column;overflow:hidden}
    .console-header{padding:10px 12px;border-bottom:1px solid #111;display:flex;align-items:center;justify-content:space-between}
    .console-body{padding:12px;flex:1;overflow:auto;font-family:monospace;font-size:13px;color:#dcdcdc;background:linear-gradient(180deg,#040404,transparent)}
    .console-input{display:flex;padding:10px;border-top:1px solid #111;background:#050505}
    .console-input input{flex:1;padding:10px;border-radius:8px;border:none;background:#0a0a0a;color:#fff;font-family:monospace;font-size:14px}
    /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ ‚Üê (–ù–∞–∑–∞–¥), —â–æ–± –≤–æ–Ω–∞ –≤–∏–≥–ª—è–¥–∞–ª–∞ —è–∫ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞ –∫–Ω–æ–ø–∫–∞ */
    .console-input button{
        margin-left:8px;
        padding:8px 12px;
        border-radius:8px;
        border:none;
        background:var(--accent);
        color:#000;
        cursor:pointer; 
        line-height: 1; 
        transition: opacity 0.1s;
    }
    .console-input button:disabled { opacity: 0.5; cursor: default; }
    
    /* –°—Ç–∏–ª—ñ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ —Ç–∞ –ø–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ */
    .modal{
        position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);
        background:#0b0b0b;border-radius:10px;
        padding:12px; 
        width:90%;max-width:900px;
        max-height:80vh; /* –í–∏–∑–Ω–∞—á–∞—î –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É –≤–∏—Å–æ—Ç—É –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ */
        overflow:hidden; 
        border:1px solid #222;z-index:60;display:none;
        padding-top: 40px; 
    }
    .modal-header {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        padding: 8px 12px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #0b0b0b;
        border-bottom: 1px solid #222;
        z-index: 61; 
    }
    .modal pre{
        white-space:pre-wrap;word-break:break-word;
        background:#060606;
        padding:12px;border-radius:8px;
        font-family:monospace;color:#eaeaea;font-size:12px;
        height: 100%; /* –ó–∞–±–µ–∑–ø–µ—á—É—î, —â–æ pre –∑–∞–π–º–∞—î –≤—Å—é –¥–æ—Å—Ç—É–ø–Ω—É –≤–∏—Å–æ—Ç—É */
        overflow-y: auto; /* –í–º–∏–∫–∞—î –ø—Ä–æ–∫—Ä—É—Ç–∫—É, —è–∫—â–æ –≤–º—ñ—Å—Ç –±—ñ–ª—å—à–∏–π –∑–∞ –≤–∏—Å–æ—Ç—É */
    }
    .modal .modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:8px; padding: 0 12px 12px 12px;} 
    .tag{font-size:12px;padding:6px 10px;border-radius:999px;cursor: pointer;}
    .small-muted{font-size:12px;color:var(--muted)}
    
    /* –°—Ç–∏–ª—å –¥–ª—è –±—ñ–ª–æ—ó –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä–∏—Ç—Ç—è */
    #closeCodeModal, #closeHelpModal {
      background: white; 
      color: #000; 
      border: 1px solid #000;
      font-weight: bold;
    }

    /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ modal-actions (—è–∫—â–æ –≤–æ–Ω–∏ –∑–∞–ª–∏—à–∏–ª–∏—Å—è) */
    .modal-actions .tag {
        background: rgba(255,255,255,0.03);
        color: #fff;
        border: 1px solid rgba(255,255,255,0.03);
    }
    
    /* –î–æ–¥–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∏–ª—å –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –î–æ–≤—ñ–¥–∫–∏ */
    #helpModal .help-item { margin-bottom: 15px; border-left: 3px solid var(--accent); padding-left: 10px; }
    #helpModal .help-item strong { color: var(--accent); }
    
    /* –í–ò–ü–†–ê–í–õ–ï–ù–û: –î–æ–¥–∞–Ω–æ —Ñ—ñ–∫—Å–æ–≤–∞–Ω—É –≤–∏—Å–æ—Ç—É –¥–ª—è –ø—Ä–æ–∫—Ä—É—á—É–≤–∞–Ω–Ω—è –≤–º—ñ—Å—Ç—É –∫–æ–¥—É */
    #codeModalContent { 
      height: 100%; 
      overflow-y: auto; /* –ù–∞—Å–ø—Ä–∞–≤–¥—ñ —Ü–µ –¥—É–±–ª—é—î—Ç—å—Å—è –≤ .modal pre, –∞–ª–µ –∑–∞–±–µ–∑–ø–µ—á—É—î –±–µ–∑–ø–µ–∫—É */
      padding: 12px; /* –î–æ–¥–∞—î–º–æ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –≤—ñ–¥—Å—Ç—É–ø, —â–æ–± –≤–º—ñ—Å—Ç –Ω–µ –ø—Ä–∏–ª–∏–ø–∞–≤ –¥–æ –∫—Ä–∞—ó–≤ */
    }
    
    /* –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –≤–∏—Å–æ—Ç—É –¥–ª—è –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–æ–¥—É –≤ modal-body */
    #codeModal {
        display: flex; /* –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –Ω–∞ flex-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫—Ä–∞—â–æ–≥–æ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –≤–∏—Å–æ—Ç–æ—é */
        flex-direction: column; 
    }
    #codeModalContent {
        flex-grow: 1; /* –î–æ–∑–≤–æ–ª—è—î –∫–æ–Ω—Ç–µ–Ω—Ç—É –∑–∞–π–º–∞—Ç–∏ –≤–µ—Å—å –¥–æ—Å—Ç—É–ø–Ω–∏–π –ø—Ä–æ—Å—Ç—ñ—Ä */
        min-height: 0; /* –í–∏—Ä—ñ—à—É—î –ø—Ä–æ–±–ª–µ–º–∏ –∑ flex */
        padding-top: 0; /* –ü—Ä–∏–±–∏—Ä–∞—î–º–æ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç –∑ padding-top –º–æ–¥–∞–ª—É */
    }

    /* –ê–Ω—ñ–º–∞—Ü—ñ—ó –¥–ª—è –Ω–æ–≤–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ */
    @keyframes spawn {
        0% { transform: scale(0); opacity: 0; }
        70% { transform: scale(1.1); opacity: 1; }
        100% { transform: scale(1); opacity: 1; }
    }

    .bonus {
        animation: spawn 0.3s ease-out;
    }

    .enemy {
        animation: spawn 0.4s ease-out;
    }

    /* –°—Ç–∏–ª—ñ –¥–ª—è —Ä—ñ–≤–Ω—ñ–≤ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ */
    .level-indicator {
        position: fixed;
        top: 60px;
        right: 10px;
        background: rgba(0, 0, 0, 0.5);
        padding: 5px 10px;
        border-radius: 8px;
        font-size: 12px;
        z-index: 5;
    }

    /* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ –±–æ—Ç–∞ */
    .bot-btn {
        background: #ff4444;
        color: white;
    }
    .bot-btn.active {
        background: #44ff44;
        color: black;
    }

    /* –°—Ç–∏–ª—ñ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å */
    .settings-modal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 70;
    }
    .settings-content {
        background: var(--panel);
        border-radius: 12px;
        padding: 20px;
        width: 90%;
        max-width: 400px;
        max-height: 80vh;
        overflow-y: auto;
    }
    .settings-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 15px 0;
        padding: 10px;
        background: rgba(255,255,255,0.05);
        border-radius: 8px;
    }
    .settings-item label {
        flex: 1;
        margin-right: 10px;
    }
    .toggle-switch {
        position: relative;
        width: 40px;
        height: 20px;
    }
    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #333;
        transition: .4s;
        border-radius: 20px;
    }
    .toggle-slider:before {
        position: absolute;
        content: "";
        height: 16px;
        width: 16px;
        left: 2px;
        bottom: 2px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
    }
    input:checked + .toggle-slider {
        background-color: var(--accent);
    }
    input:checked + .toggle-slider:before {
        transform: translateX(20px);
    }
    .language-select {
        background: #333;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 6px;
        cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- –ê—É–¥—ñ–æ –µ–ª–µ–º–µ–Ω—Ç–∏ -->
  <audio id="menuMusic" loop>
    <source src="music/menu.mp3" type="audio/mpeg">
    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –∞—É–¥—ñ–æ –µ–ª–µ–º–µ–Ω—Ç.
  </audio>
  
  <audio id="gameMusic" loop>
    <source src="music/game.mp3" type="audio/mpeg">
    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –∞—É–¥—ñ–æ –µ–ª–µ–º–µ–Ω—Ç.
  </audio>

  <div id="menu" class="screen">
    <h1>üü¶ Block Runner</h1>
    <p>–£–Ω–∏–∫–∞–π —á–µ—Ä–≤–æ–Ω–∏—Ö –≤–æ—Ä–æ–≥—ñ–≤</p>  
    <div class="buttons">
      <button id="startBtn">‚ñ∂ –ü–æ—á–∞—Ç–∏</button>
      <button id="howBtn">‚ùî –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è</button>
      <button id="botBtn" class="bot-btn">ü§ñ –ë–æ—Ç: –í–ò–ú–ö</button>
      <button id="settingsBtn">‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
      <button id="resetBtn">üóëÔ∏è –°–∫–∏–Ω—É—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å</button>
    </div>
    <p class="small">–†–µ–∫–æ—Ä–¥: <strong id="bestMenu">0</strong> | –û—á–∫–∏: <strong id="scoreMenu">0</strong></p>
  </div>

  <div id="gameScreen" class="screen" style="display:none">
    <canvas id="game"></canvas>
    <div id="ui">
      <div class="controls">
        <span>–ß–∞—Å: <span id="time">0</span></span>
        <span>–†–µ–∫–æ—Ä–¥: <span id="best">0</span></span>
        <span>–û—á–∫–∏: <span id="score">0</span></span>
        <button id="pauseBtn">‚è∏Ô∏è</button>
      </div>
    </div>
    <div class="level-indicator">–†—ñ–≤–µ–Ω—å: <span id="level">1</span></div>
  </div>

  <div id="gameOver" class="screen" style="display:none;">
    <h1>üíÄ –ì—Ä—É –∑–∞–∫—ñ–Ω—á–µ–Ω–æ!</h1>
    <p>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <strong id="scoreOut">0</strong> —Å</p>
    <p>–û—á–∫–∏: <strong id="finalScore">0</strong></p>
    <p class="small">–†–µ–∫–æ—Ä–¥: <strong id="bestOut">0</strong> —Å</p>
    <div class="buttons">
      <button id="retryBtn">üîÅ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
      <button id="menuBtn">üè† –ú–µ–Ω—é</button>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å -->
  <div id="settingsModal" class="settings-modal" aria-hidden="true">
    <div class="settings-content" role="dialog" aria-modal="true" aria-label="–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥—Ä–∏">
      <h2 style="text-align: center; margin-top: 0; color: var(--accent);">‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2>
      
      <div class="settings-item">
        <label for="languageSelect">üåê –ú–æ–≤–∞:</label>
        <select id="languageSelect" class="language-select">
          <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
          <option value="en">English</option>
        </select>
      </div>
      
      <div class="settings-item">
        <label for="menuMusicToggle">üéµ –ú—É–∑–∏–∫–∞ –≤ –º–µ–Ω—é</label>
        <label class="toggle-switch">
          <input type="checkbox" id="menuMusicToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
      
      <div class="settings-item">
        <label for="gameMusicToggle">üéµ –ú—É–∑–∏–∫–∞ –≤ –≥—Ä—ñ</label>
        <label class="toggle-switch">
          <input type="checkbox" id="gameMusicToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
      
      <div class="settings-item">
        <label for="vibrationToggle">üì≥ –í—ñ–±—Ä–∞—Ü—ñ—è</label>
        <label class="toggle-switch">
          <input type="checkbox" id="vibrationToggle" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
      
      <div class="buttons" style="margin-top: 20px;">
        <button id="closeSettingsBtn">‚úÖ –ì–æ—Ç–æ–≤–æ</button>
      </div>
    </div>
  </div>

  <div id="pauseModal" class="pause-modal" aria-hidden="true">
    <div class="pause-content" role="dialog" aria-modal="true" aria-label="–ì—Ä–∞ –Ω–∞ –ø–∞—É–∑—ñ">
      <h2>‚è∏Ô∏è –ü–∞—É–∑–∞</h2>
      <p>–ì—Ä–∞ –ø—Ä–∏–∑—É–ø–∏–Ω–µ–Ω–∞.</p>
      <div class="buttons">
        <button id="resumeBtn">‚ñ∂ –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</button>
        <button id="pauseMenuBtn">üè† –£ –º–µ–Ω—é</button>
      </div>
      <p class="small" style="margin-top: 15px;">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å Esc –∞–±–æ –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏"</p>
    </div>
  </div>

  <div id="consoleOverlay" class="console-overlay" aria-hidden="true">
    <div class="console" role="dialog" aria-label="–ö–æ–º–∞–Ω–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –≥—Ä–∏">
      <div class="console-header">
        <div><span class="tag">Game Console</span> <span class="small-muted" id="consoleStatus">system ready</span></div>
        <div>
          <button id="closeConsoleBtn" class="tag" style="cursor:pointer">–ó–∞–∫—Ä–∏—Ç–∏</button>
        </div>
      </div>
      <div id="consoleBody" class="console-body"></div>
      <div class="console-input">
        <button id="consoleBackBtn" title="–ù–∞–∑–∞–¥ / –ó–∞–∫—Ä–∏—Ç–∏ –∫–æ–Ω—Å–æ–ª—å" style="background: #333; color: #fff; margin-right: 8px;">‚Üê</button>
        <input id="consoleInput" placeholder="–í–≤–µ–¥—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ /help" />
        <button id="consoleSend">–í–∏–∫–æ–Ω–∞—Ç–∏</button>
      </div>
    </div>
  </div>

  <div id="codeModal" class="modal" role="dialog" aria-label="–ö–æ–¥ –≥—Ä–∏">
    <div class="modal-header">
      <strong>–ü–æ–≤–Ω–∏–π –∫–æ–¥ –≥—Ä–∏ (–ü–∞—Ä–æ–ª—å –ø—Ä–∏–π–Ω—è—Ç–æ)</strong>
      <div><button id="closeCodeModal" class="tag">–ó–∞–∫—Ä–∏—Ç–∏</button></div> 
    </div>

    <div id="codeModalContent">
      <pre id="codePre"></pre>
    </div>
  </div>

  <div id="helpModal" class="modal" role="dialog" aria-label="–î–æ–≤—ñ–¥–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–Ω—ñ–π —Å—Ç—Ä–æ—Ü—ñ" style="padding-top: 50px;">
    <div class="modal-header">
        <h2 style="margin:0; color:var(--accent); font-size: 16px;">–î–æ–≤—ñ–¥–∫–∞ –ø–æ –ö–æ–Ω—Å–æ–ª—ñ</h2>
        <div><button id="closeHelpModal" class="tag">–ó–∞–∫—Ä–∏—Ç–∏</button></div>
    </div>
    <div style="padding: 12px; height: 100%; overflow-y: auto;">
        <div class="help-item">
            <strong>/code</strong>
            <p>–ü–æ–∫–∞–∑—É—î –ø–æ–≤–Ω–∏–π –≤–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ –≥—Ä–∏.</p>
        </div>
        <div class="help-item">
            <strong>/god on | /god off</strong>
            <p>–í–º–∏–∫–∞—î –∞–±–æ –≤–∏–º–∏–∫–∞—î —Ä–µ–∂–∏–º –Ω–µ–ø–µ—Ä–µ–º–æ–∂–Ω–æ—Å—Ç—ñ (God Mode). –£–≤—ñ–º–∫–Ω–µ–Ω–∏–π —Ä–µ–∂–∏–º –¥–æ–∑–≤–æ–ª—è—î –≥—Ä–∞–≤—Ü—é –Ω–µ –ø–æ–º–∏—Ä–∞—Ç–∏ –≤—ñ–¥ –∑—ñ—Ç–∫–Ω–µ–Ω—å —ñ–∑ —á–µ—Ä–≤–æ–Ω–∏–º–∏ –≤–æ—Ä–æ–≥–∞–º–∏.</p>
        </div>
        <div class="help-item">
            <strong>/score</strong>
            <p>–ü–æ–∫–∞–∑—É—î –ø–æ—Ç–æ—á–Ω–∏–π —Ä–∞—Ö—É–Ω–æ–∫.</p>
        </div>
        <div class="help-item">
            <strong>/time</strong>
            <p>–ü–æ–∫–∞–∑—É—î —á–∞—Å –≥—Ä–∏.</p>
        </div>
        <div class="help-item">
            <strong>/enemies</strong>
            <p>–ü–æ–∫–∞–∑—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∏—Ö –≤–æ—Ä–æ–≥—ñ–≤.</p>
        </div>
        <div class="help-item">
            <strong>/clear</strong>
            <p>–û—á–∏—â–∞—î –∫–æ–Ω—Å–æ–ª—å.</p>
        </div>
        <div class="help-item">
            <strong>/help</strong>
            <p>–í–∏–≤–æ–¥–∏—Ç—å —Ü–µ –¥–æ–≤—ñ–¥–∫–æ–≤–µ –≤—ñ–∫–Ω–æ (–∑–Ω–∏–∫–Ω–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥).</p>
        </div>
        <div class="help-item">
            <strong>/bb on | /bb off</strong>
            <p>–í–º–∏–∫–∞—î/–≤–∏–º–∏–∫–∞—î –±–æ—Ç–∞-–æ—Ö–æ—Ä–æ–Ω—Ü—è, —è–∫–∏–π –ª—ñ—Ç–∞—î –Ω–∞–≤–∫–æ–ª–æ –≥—Ä–∞–≤—Ü—è —Ç–∞ –∑–Ω–∏—â—É—î –≤–æ—Ä–æ–≥—ñ–≤.</p>
        </div>
    </div>
  </div>

  <script>
    (() => {
      /* ------------------ –ï–ª–µ–º–µ–Ω—Ç–∏ DOM ------------------ */
      const menu = document.getElementById('menu');
      const gameScreen = document.getElementById('gameScreen');
      const gameOver = document.getElementById('gameOver');
      const startBtn = document.getElementById('startBtn');
      const howBtn = document.getElementById('howBtn');
      const botBtn = document.getElementById('botBtn');
      const settingsBtn = document.getElementById('settingsBtn');
      const retryBtn = document.getElementById('retryBtn');
      const menuBtn = document.getElementById('menuBtn');
      const resetBtn = document.getElementById('resetBtn');
      const pauseModal = document.getElementById('pauseModal');
      const pauseBtn = document.getElementById('pauseBtn');
      const resumeBtn = document.getElementById('resumeBtn');
      const pauseMenuBtn = document.getElementById('pauseMenuBtn');
      const menuMusic = document.getElementById('menuMusic');
      const gameMusic = document.getElementById('gameMusic');
      const settingsModal = document.getElementById('settingsModal');
      const closeSettingsBtn = document.getElementById('closeSettingsBtn');
      const languageSelect = document.getElementById('languageSelect');
      const menuMusicToggle = document.getElementById('menuMusicToggle');
      const gameMusicToggle = document.getElementById('gameMusicToggle');
      const vibrationToggle = document.getElementById('vibrationToggle');

      // –õ—ñ—á–∏–ª—å–Ω–∏–∫–∏ - –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∏
      let bestMenuEl = document.getElementById('bestMenu');
      let scoreMenuEl = document.getElementById('scoreMenu');
      let timeEl = document.getElementById('time');
      let bestEl = document.getElementById('best');
      let scoreEl = document.getElementById('score');
      let scoreOut = document.getElementById('scoreOut');
      let finalScore = document.getElementById('finalScore');
      let bestOut = document.getElementById('bestOut');
      let levelEl = document.getElementById('level');

      const canvas = document.getElementById('game');
      const ctx = canvas.getContext('2d');
      
      // –ï–ª–µ–º–µ–Ω—Ç–∏ –∫–æ–Ω—Å–æ–ª—ñ —Ç–∞ –º–æ–¥–∞–ª—å–Ω–∏—Ö –≤—ñ–∫–æ–Ω
      const consoleOverlay = document.getElementById('consoleOverlay');
      const consoleBody = document.getElementById('consoleBody');
      const consoleInput = document.getElementById('consoleInput');
      const consoleSend = document.getElementById('consoleSend');
      const closeConsoleBtn = document.getElementById('closeConsoleBtn');
      const consoleBackBtn = document.getElementById('consoleBackBtn'); 
      const consoleStatus = document.getElementById('consoleStatus');
      const codeModal = document.getElementById('codeModal');
      const codePre = document.getElementById('codePre');
      const closeCodeModal = document.getElementById('closeCodeModal'); 
      const helpModal = document.getElementById('helpModal'); 
      const closeHelpModal = document.getElementById('closeHelpModal'); 

      /* ------------------ –ó–º—ñ–Ω–Ω—ñ —Ç–∞ —Å—Ç–∞–Ω –≥—Ä–∏ ------------------ */
      let width = innerWidth, height = innerHeight;
      let animationId = null;
      let timeTimer = null;
      let spawnTimer = null;
      let bonusTimer = null;
      let powerupTimer = null;
      let timeSec = 0;
      let enemies = [];
      let bonuses = [];
      let aiBot = { x: 100, y: 100, size: 30, speed: 1 };
      let bodyguardBot = { x: 0, y: 0, size: 25, speed: 2, angle: 0, active: false };
      let keys = {};
      let best = parseInt(localStorage.getItem('bestTime')) || 0;
      let bestScore = parseInt(localStorage.getItem('bestScore')) || 0;
      let particles = [];
      let stars = [];
      let score = 0;
      let level = 1;
      let enemySpawnRate = 1000;
      let botEnabled = false;
      let menuMusicEnabled = true;
      let gameMusicEnabled = true;
      let vibrationEnabled = true;
      let currentLanguage = 'uk';
      
      // –ü—Ä–∞–ø–æ—Ä—Ü—ñ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è
      let musicAutoplayAttempted = false;
      
      // –°–ª–æ–≤–Ω–∏–∫–∏ –¥–ª—è –ø–µ—Ä–µ–∫–ª–∞–¥—ñ–≤
      const translations = {
        uk: {
          title: "Block Runner ‚Äî –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –í–µ—Ä—Å—ñ—è",
          gameTitle: "üü¶ Block Runner",
          gameSubtitle: "–£–Ω–∏–∫–∞–π —á–µ—Ä–≤–æ–Ω–∏—Ö –≤–æ—Ä–æ–≥—ñ–≤",
          startBtn: "‚ñ∂ –ü–æ—á–∞—Ç–∏",
          howBtn: "‚ùî –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è",
          botBtnOn: "ü§ñ –ë–æ—Ç: –£–í–Ü–ú–ö",
          botBtnOff: "ü§ñ –ë–æ—Ç: –í–ò–ú–ö",
          settingsBtn: "‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è",
          resetBtn: "üóëÔ∏è –°–∫–∏–Ω—É—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å",
          bestRecord: "–†–µ–∫–æ—Ä–¥",
          points: "–û—á–∫–∏",
          time: "–ß–∞—Å",
          level: "–†—ñ–≤–µ–Ω—å",
          gameOver: "üíÄ –ì—Ä—É –∑–∞–∫—ñ–Ω—á–µ–Ω–æ!",
          yourScore: "–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç",
          seconds: "—Å",
          retryBtn: "üîÅ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑",
          menuBtn: "üè† –ú–µ–Ω—é",
          pause: "‚è∏Ô∏è –ü–∞—É–∑–∞",
          gamePaused: "–ì—Ä–∞ –ø—Ä–∏–∑—É–ø–∏–Ω–µ–Ω–∞.",
          resumeBtn: "‚ñ∂ –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏",
          pauseMenuBtn: "üè† –£ –º–µ–Ω—é",
          pressEsc: "–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å Esc –∞–±–æ –∫–Ω–æ–ø–∫—É '–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏'",
          settingsTitle: "‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è",
          language: "üåê –ú–æ–≤–∞:",
          menuMusic: "üéµ –ú—É–∑–∏–∫–∞ –≤ –º–µ–Ω—é",
          gameMusic: "üéµ –ú—É–∑–∏–∫–∞ –≤ –≥—Ä—ñ",
          vibration: "üì≥ –í—ñ–±—Ä–∞—Ü—ñ—è",
          doneBtn: "‚úÖ –ì–æ—Ç–æ–≤–æ",
          consolePlaceholder: "–í–≤–µ–¥—ñ—Ç—å –∫–æ–º–∞–Ω–¥—É, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ /help",
          consoleSend: "–í–∏–∫–æ–Ω–∞—Ç–∏",
          close: "–ó–∞–∫—Ä–∏—Ç–∏"
        },
        en: {
          title: "Block Runner ‚Äî Enhanced Version",
          gameTitle: "üü¶ Block Runner",
          gameSubtitle: "Avoid red enemies",
          startBtn: "‚ñ∂ Start",
          howBtn: "‚ùî Instructions",
          botBtnOn: "ü§ñ Bot: ON",
          botBtnOff: "ü§ñ Bot: OFF",
          settingsBtn: "‚öôÔ∏è Settings",
          resetBtn: "üóëÔ∏è Reset Progress",
          bestRecord: "Best",
          points: "Points",
          time: "Time",
          level: "Level",
          gameOver: "üíÄ Game Over!",
          yourScore: "Your score",
          seconds: "s",
          retryBtn: "üîÅ Try Again",
          menuBtn: "üè† Menu",
          pause: "‚è∏Ô∏è Pause",
          gamePaused: "Game paused.",
          resumeBtn: "‚ñ∂ Resume",
          pauseMenuBtn: "üè† To Menu",
          pressEsc: "Press Esc or 'Resume' button",
          settingsTitle: "‚öôÔ∏è Settings",
          language: "üåê Language:",
          menuMusic: "üéµ Menu Music",
          gameMusic: "üéµ Game Music",
          vibration: "üì≥ Vibration",
          doneBtn: "‚úÖ Done",
          consolePlaceholder: "Enter command, e.g. /help",
          consoleSend: "Execute",
          close: "Close"
        }
      };
      
      // –ó–º—ñ–Ω–Ω—ñ –¥–ª—è –µ—Ñ–µ–∫—Ç—ñ–≤
      let activeEffects = {
        slowMotion: { active: false, endTime: 0 },
        shield: { active: false, endTime: 0 },
        speedBoost: { active: false, endTime: 0 }
      };
      
      let joystick = {x:0, y:0, dx:0, dy:0, active:false};
      let player = {x:0,y:0,size:30,speed:4};
      let isGameOverAnim = false;
      let isGameActive = false;
      let isGamePaused = false;
      let godMode = false;
      let helpTimeoutId = null;
      
      const SECURE_PASSWORD = 'kill.app';

      /* ------------------ –§—É–Ω–∫—Ü—ñ—ó –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ª—ñ—á–∏–ª—å–Ω–∏–∫—ñ–≤ ------------------ */
      function updateCounters() {
        if (timeEl) timeEl.textContent = timeSec;
        if (bestEl) bestEl.textContent = best;
        if (scoreEl) scoreEl.textContent = score;
        if (levelEl) levelEl.textContent = level;
        if (bestMenuEl) bestMenuEl.textContent = best;
        if (scoreMenuEl) scoreMenuEl.textContent = bestScore;
      }

      function updateGameOverCounters() {
        if (scoreOut) scoreOut.textContent = timeSec;
        if (finalScore) finalScore.textContent = score;
        if (bestOut) bestOut.textContent = best;
      }

      /* ------------------ –§—É–Ω–∫—Ü—ñ—ó –ø–µ—Ä–µ–∫–ª–∞–¥—É ------------------ */
      function updateLanguage() {
        const t = translations[currentLanguage];
        
        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –≤ DOM
        document.title = t.title;
        document.querySelector('#menu h1').textContent = t.gameTitle;
        document.querySelector('#menu p').textContent = t.gameSubtitle;
        startBtn.textContent = t.startBtn;
        howBtn.textContent = t.howBtn;
        settingsBtn.textContent = t.settingsBtn;
        resetBtn.textContent = t.resetBtn;
        
        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –≤ UI –≥—Ä–∏ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É –ª—ñ—á–∏–ª—å–Ω–∏–∫—ñ–≤
        const controls = document.querySelector('#ui .controls');
        if (controls) {
          const timeSpan = controls.querySelector('span:nth-child(1)');
          const bestSpan = controls.querySelector('span:nth-child(2)');
          const scoreSpan = controls.querySelector('span:nth-child(3)');
          
          if (timeSpan) timeSpan.innerHTML = `${t.time}: <span id="time">${timeSec}</span>`;
          if (bestSpan) bestSpan.innerHTML = `${t.bestRecord}: <span id="best">${best}</span>`;
          if (scoreSpan) scoreSpan.innerHTML = `${t.points}: <span id="score">${score}</span>`;
          
          // –û–Ω–æ–≤–ª—é—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∏
          timeEl = document.getElementById('time');
          bestEl = document.getElementById('best');
          scoreEl = document.getElementById('score');
        }
        
        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Ä—ñ–≤–Ω—è
        const levelIndicator = document.querySelector('.level-indicator');
        if (levelIndicator) {
          levelIndicator.innerHTML = `${t.level}: <span id="level">${level}</span>`;
          levelEl = document.getElementById('level');
        }
        
        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –º–µ–Ω—é
        const menuStats = document.querySelector('#menu .small');
        if (menuStats) {
          menuStats.innerHTML = `${t.bestRecord}: <strong id="bestMenu">${best}</strong> | ${t.points}: <strong id="scoreMenu">${bestScore}</strong>`;
          bestMenuEl = document.getElementById('bestMenu');
          scoreMenuEl = document.getElementById('scoreMenu');
        }
        
        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è game over –µ–∫—Ä–∞–Ω—É
        document.querySelector('#gameOver h1').textContent = t.gameOver;
        const gameOverScore = document.querySelector('#gameOver p:nth-child(2)');
        const gameOverPoints = document.querySelector('#gameOver p:nth-child(3)');
        const gameOverBest = document.querySelector('#gameOver .small');
        
        if (gameOverScore) gameOverScore.innerHTML = `${t.yourScore}: <strong id="scoreOut">${timeSec}</strong> ${t.seconds}`;
        if (gameOverPoints) gameOverPoints.innerHTML = `${t.points}: <strong id="finalScore">${score}</strong>`;
        if (gameOverBest) gameOverBest.innerHTML = `${t.bestRecord}: <strong id="bestOut">${best}</strong> ${t.seconds}`;
        
        scoreOut = document.getElementById('scoreOut');
        finalScore = document.getElementById('finalScore');
        bestOut = document.getElementById('bestOut');
        
        retryBtn.textContent = t.retryBtn;
        menuBtn.textContent = t.menuBtn;
        
        document.querySelector('.pause-content h2').textContent = t.pause;
        document.querySelector('.pause-content p').textContent = t.gamePaused;
        resumeBtn.textContent = t.resumeBtn;
        pauseMenuBtn.textContent = t.pauseMenuBtn;
        document.querySelector('.pause-content .small').textContent = t.pressEsc;
        
        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö
        document.querySelector('.settings-content h2').textContent = t.settingsTitle;
        document.querySelector('.settings-item:nth-child(1) label').textContent = t.language;
        document.querySelector('.settings-item:nth-child(2) label').textContent = t.menuMusic;
        document.querySelector('.settings-item:nth-child(3) label').textContent = t.gameMusic;
        document.querySelector('.settings-item:nth-child(4) label').textContent = t.vibration;
        closeSettingsBtn.textContent = t.doneBtn;
        
        consoleInput.placeholder = t.consolePlaceholder;
        consoleSend.textContent = t.consoleSend;
        closeConsoleBtn.textContent = t.close;
        closeCodeModal.textContent = t.close;
        closeHelpModal.textContent = t.close;
        
        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ –±–æ—Ç–∞
        updateBotButton();
      }

      /* ------------------ –§—É–Ω–∫—Ü—ñ—ó –≥—Ä–∏ ------------------ */
      function resize(){
        width=innerWidth; height=innerHeight;
        canvas.width=width; canvas.height=height;
        player.size = Math.max(24, Math.min(width,height)*0.045);
        player.speed = Math.max(3, Math.min(width,height)*0.012);
        stars=[];
        for(let i=0;i<150;i++){
          stars.push({x:Math.random()*width, y:Math.random()*height, r:Math.random()*2+0.5, speed:Math.random()*0.1+0.03});
        }
      }
      addEventListener('resize', resize);

      function showScreen(id){
        menu.style.display = (id==='menu')?'flex':'none';
        gameScreen.style.display = (id==='game')?'flex':'none';
        gameOver.style.display = (id==='over')?'flex':'none';
        
        pauseModal.style.display = 'none';
        isGamePaused = false;
        
        if(id==='menu') {
          updateCounters();
          playMenuMusic();
        } else if(id==='game') {
          playGameMusic();
        } else if(id==='over') {
          updateGameOverCounters();
          stopGameMusic();
        }
      }

      function resetGameState(){
        cancelAnimationFrame(animationId);
        clearInterval(timeTimer);
        clearInterval(spawnTimer);
        clearInterval(bonusTimer);
        clearInterval(powerupTimer);
        enemies=[]; particles=[]; bonuses=[];
        isGameOverAnim=false;
        isGameActive=false;
        isGamePaused=false;
        score = 0;
        level = 1;
        enemySpawnRate = 1000;
        activeEffects = {
          slowMotion: { active: false, endTime: 0 },
          shield: { active: false, endTime: 0 },
          speedBoost: { active: false, endTime: 0 }
        };
        pauseModal.style.display = 'none';
      }

      function toggleBot() {
        botEnabled = !botEnabled;
        updateBotButton();
        consoleLog(`–ë–æ—Ç ${botEnabled ? '—É–≤—ñ–º–∫–Ω–µ–Ω–∏–π' : '–≤–∏–º–∫–Ω–µ–Ω–∏–π'}`, 'success');
      }

      function updateBotButton() {
        const t = translations[currentLanguage];
        if (botEnabled) {
          botBtn.textContent = t.botBtnOn;
          botBtn.classList.add('active');
        } else {
          botBtn.textContent = t.botBtnOff;
          botBtn.classList.remove('active');
        }
      }

      function startGame(){
        resetGameState(); resize();
        player.x=width/2-player.size/2;
        player.y=height/2-player.size/2;
        aiBot.x = Math.random() * width;
        aiBot.y = Math.random() * height;
        aiBot.size = player.size * 0.9;
        aiBot.speed = 0.7 + Math.min(1.5, best * 0.025);
        timeSec = 0; 
        score = 0; 
        level = 1;

        best = parseInt(localStorage.getItem('bestTime')) || 0;
        bestScore = parseInt(localStorage.getItem('bestScore')) || 0;

        timeTimer=setInterval(()=>{
          timeSec++; 
          updateCounters();
          updateDifficulty();
        },1000);
        spawnTimer=setInterval(()=>spawnEnemy(),enemySpawnRate);
        bonusTimer=setInterval(()=>spawnBonus(),5000);
        powerupTimer=setInterval(()=>spawnRandomPowerup(),10000);
        
        isGameActive=true;
        updateCounters();
        animationId=requestAnimationFrame(loop);
      }

      function updateDifficulty() {
        level = Math.floor(timeSec / 30) + 1;
        enemySpawnRate = Math.max(300, 1000 - level * 100);
        
        clearInterval(spawnTimer);
        spawnTimer = setInterval(() => spawnEnemy(), enemySpawnRate);
        updateCounters();
      }
      
      function togglePause(){
        if(!isGameActive || isGameOverAnim) return;

        isGamePaused = !isGamePaused;
        pauseModal.style.display = isGamePaused ? 'flex' : 'none';

        if(isGamePaused){
          cancelAnimationFrame(animationId);
          clearInterval(timeTimer);
          clearInterval(spawnTimer);
          clearInterval(bonusTimer);
          clearInterval(powerupTimer);
          stopGameMusic();
        } else {
          timeTimer=setInterval(()=>{
            timeSec++; 
            updateCounters();
            updateDifficulty();
          },1000);
          spawnTimer=setInterval(()=>spawnEnemy(),enemySpawnRate);
          bonusTimer=setInterval(()=>spawnBonus(),5000);
          powerupTimer=setInterval(()=>spawnRandomPowerup(),15000);
          animationId=requestAnimationFrame(loop);
          playGameMusic();
        }
      }

      function endGame(){
        clearInterval(timeTimer);
        clearInterval(spawnTimer);
        clearInterval(bonusTimer);
        clearInterval(powerupTimer);
        isGameActive=false;
        isGamePaused = false;
        pauseModal.style.display = 'none';

        for(let i=0;i<80;i++){
          particles.push({
            x:player.x+player.size/2,
            y:player.y+player.size/2,
            vx:(Math.random()-0.5)*4,
            vy:(Math.random()-0.5)*4,
            life:60+Math.random()*30,
            color:i%2?'#0af':'#f44',
            glow: Math.random()*3+1
          });
        }
        isGameOverAnim=true;
      }

      function spawnEnemy(){
        const types = ['normal', 'fast', 'big', 'smart'];
        const type = types[Math.floor(Math.random() * types.length)];
        
        const size = type === 'big' ? 40 : type === 'fast' ? 15 : 25;
        const speed = type === 'fast' ? 3 : type === 'smart' ? 1 : 1.5 + Math.random();
        
        let x, y, vx = 0, vy = 0;
        const edge = Math.floor(Math.random() * 4);
        
        if(edge===0){x=-size;y=Math.random()*height;vx=speed;}
        if(edge===1){x=width+size;y=Math.random()*height;vx=-speed;}
        if(edge===2){x=Math.random()*width;y=-size;vy=speed;}
        if(edge===3){x=Math.random()*width;y=height+size;vy=-speed;}
        
        enemies.push({x, y, vx, vy, size, type});
      }

      function spawnBonus(){
        if(bonuses.length < 3) {
          bonuses.push({
            x: Math.random() * (width - 20),
            y: Math.random() * (height - 20),
            size: 15,
            type: Math.random() > 0.7 ? 'time' : 'points',
            life: 300
          });
        }
      }

      // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Å–ø–∞–≤–Ω—É –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ power-up
      function spawnRandomPowerup(){
        const powerups = ['slowMotion', 'shield', 'speedBoost'];
        const randomPowerup = powerups[Math.floor(Math.random() * powerups.length)];
        
        bonuses.push({
          x: Math.random() * (width - 25),
          y: Math.random() * (height - 25),
          size: 20,
          type: randomPowerup,
          life: 300,
          color: randomPowerup === 'slowMotion' ? '#ff00ff' : 
                 randomPowerup === 'shield' ? '#00ffff' : '#ffff00'
        });
      }

      function activatePowerup(type){
        const now = Date.now();
        const duration = 5000; // 5 —Å–µ–∫—É–Ω–¥
        
        switch(type){
          case 'slowMotion':
            activeEffects.slowMotion = { active: true, endTime: now + duration };
            consoleLog('‚ö° Slow Motion –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ! –í–æ—Ä–æ–≥–∏ —Å–ø–æ–≤—ñ–ª—å–Ω–µ–Ω—ñ –Ω–∞ 5 —Å–µ–∫—É–Ω–¥', 'success');
            break;
          case 'shield':
           const shieldDuration = 20000; // 20 —Å–µ–∫—É–Ω–¥
           activeEffects.shield = { active: true, endTime: now + shieldDuration };
           consoleLog('üõ°Ô∏è Shield –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ! –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –æ–¥–Ω–æ–≥–æ —É–¥–∞—Ä—É –Ω–∞ 20 —Å–µ–∫—É–Ω–¥', 'success');
 
  // –ü—Ä–æ—Å—Ç–æ —Ç–∞–π–º–µ—Ä, –±–µ–∑ –ª—ñ—á–∏–ª—å–Ω–∏–∫–∞
           setTimeout(() => {
           activeEffects.shield.active = false;
           consoleLog('üõ°Ô∏è Shield –∑–∞–∫—ñ–Ω—á–∏–≤—Å—è!', 'info');
          }, shieldDuration);
          break;
          case 'speedBoost':
            activeEffects.speedBoost = { active: true, endTime: now + duration };
            consoleLog('üöÄ Speed Boost –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ! –®–≤–∏–¥–∫—ñ—Å—Ç—å –∑–±—ñ–ª—å—à–µ–Ω–∞ –Ω–∞ 5 —Å–µ–∫—É–Ω–¥', 'success');
            break;
        }
      }

      function updateEffects(){
        const now = Date.now();
        
        for(let effect in activeEffects){
          if(activeEffects[effect].active && now > activeEffects[effect].endTime){
            activeEffects[effect].active = false;
            consoleLog(`${effect} –∑–∞–∫—ñ–Ω—á–∏–≤—Å—è`, 'info');
          }
        }
      }

      function updateBodyguardBot(){
        if(!bodyguardBot.active) return;
        
        // –†—É—Ö –ø–æ –∫–æ–ª—É –Ω–∞–≤–∫–æ–ª–æ –≥—Ä–∞–≤—Ü—è
        bodyguardBot.angle += 0.05;
        const radius = 80;
        bodyguardBot.x = player.x + player.size/2 + Math.cos(bodyguardBot.angle) * radius - bodyguardBot.size/2;
        bodyguardBot.y = player.y + player.size/2 + Math.sin(bodyguardBot.angle) * radius - bodyguardBot.size/2;
        
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑—ñ—Ç–∫–Ω–µ–Ω—å –∑ –≤–æ—Ä–æ–≥–∞–º–∏
        for(let i = enemies.length - 1; i >= 0; i--){
          const e = enemies[i];
          if(
            bodyguardBot.x < e.x + e.size &&
            bodyguardBot.x + bodyguardBot.size > e.x &&
            bodyguardBot.y < e.y + e.size &&
            bodyguardBot.y + bodyguardBot.size > e.y
          ){
            // 25% —à–∞–Ω—Å –∑–Ω–∏—â–∏—Ç–∏ –≤–æ—Ä–æ–≥–∞
            if(Math.random() < 0.25){
              enemies.splice(i, 1);
              createBonusParticles(e.x + e.size/2, e.y + e.size/2, '#00ff00');
              consoleLog('üõ°Ô∏è –ë–æ—Ç-–æ—Ö–æ—Ä–æ–Ω–µ—Ü—å –∑–Ω–∏—â–∏–≤ –≤–æ—Ä–æ–≥–∞!', 'success');
            }
          }
        }
      }

      function createBonusParticles(x, y, color) {
        for(let i=0;i<20;i++){
          particles.push({
            x: x,
            y: y,
            vx: (Math.random()-0.5)*3,
            vy: (Math.random()-0.5)*3,
            life: 30+Math.random()*20,
            color: color,
            glow: Math.random()*2+1
          });
        }
      }

      // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–±—Ä–∞—Ü—ñ—ó
      function vibrate(pattern) {
        if (vibrationEnabled && navigator.vibrate) {
          navigator.vibrate(pattern);
        }
      }

      function update(){
        if(isGamePaused) return;

        if(isGameActive){
          // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –µ—Ñ–µ–∫—Ç—ñ–≤
          updateEffects();
          
          // –†—É—Ö –≥—Ä–∞–≤—Ü—è –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º speed boost
          let currentSpeed = player.speed;
          if(activeEffects.speedBoost.active) currentSpeed *= 1.6;
          
          if(keys['ArrowUp']||keys['w']) player.y-=currentSpeed;
          if(keys['ArrowDown']||keys['s']) player.y+=currentSpeed;
          if(keys['ArrowLeft']||keys['a']) player.x-=currentSpeed;
          if(keys['ArrowRight']||keys['d']) player.x+=currentSpeed;

          if(joystick.active){
            player.x += joystick.dx * currentSpeed;
            player.y += joystick.dy * currentSpeed;
          }

          player.x=Math.max(0,Math.min(player.x,width-player.size));
          player.y=Math.max(0,Math.min(player.y,height-player.size));

          // –†—É—Ö AI –±–æ—Ç–∞
          if (botEnabled) {
            const dx = player.x - aiBot.x;
            const dy = player.y - aiBot.y;
            const dist = Math.hypot(dx, dy);

            if (dist > 1) {
              aiBot.x += (dx / dist) * aiBot.speed;
              aiBot.y += (dy / dist) * aiBot.speed;
            }

            if (
              aiBot.x < player.x + player.size &&
              aiBot.x + aiBot.size > player.x &&
              aiBot.y < player.y + player.size &&
              aiBot.y + aiBot.size > player.y
            ) {
              if (!godMode) { 
                // –í—ñ–±—Ä–∞—Ü—ñ—è –ø—Ä–∏ –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—ñ –∑ –±–æ—Ç–æ–º
                vibrate([100, 50, 100]);
                endGame(); 
                return; 
              }
            }
          }

          // –†—É—Ö –≤–æ—Ä–æ–≥—ñ–≤ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º slow motion
          let enemySpeedMultiplier = 1;
          if(activeEffects.slowMotion.active) enemySpeedMultiplier = 0.35;
          
          for(let e of enemies){ 
            e.x+=e.vx * enemySpeedMultiplier; 
            e.y+=e.vy * enemySpeedMultiplier; 
          }
          enemies=enemies.filter(e=>e.x>-200&&e.x<width+200&&e.y>-200&&e.y<height+200);

          // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑—ñ—Ç–∫–Ω–µ–Ω—å –∑ –≤–æ—Ä–æ–≥–∞–º–∏
          for(let e of enemies){
            if(e.x<player.x+player.size&&e.x+e.size>player.x&&e.y<player.y+player.size&&e.y+e.size>player.y){
              if(!godMode){ 
                if(activeEffects.shield.active){
                  activeEffects.shield.active = false;
                  // –í—ñ–±—Ä–∞—Ü—ñ—è –ø—Ä–∏ –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—ñ –∑ —â–∏—Ç–æ–º
                  vibrate([50, 30, 50]);
                  consoleLog('üõ°Ô∏è Shield –ø–æ–≥–ª–∏–Ω—É–≤ —É–¥–∞—Ä!', 'success');
                  // –í–∏–¥–∞–ª—è—î–º–æ –≤–æ—Ä–æ–≥–∞ –ø—Ä–∏ –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—ñ –∑ —â–∏—Ç–æ–º
                  enemies = enemies.filter(enemy => enemy !== e);
                  createBonusParticles(e.x + e.size/2, e.y + e.size/2, '#00ffff');
                } else {
                  // –í—ñ–±—Ä–∞—Ü—ñ—è –ø—Ä–∏ –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—ñ –∑ –≤–æ—Ä–æ–≥–æ–º
                  vibrate([200, 100, 200]);
                  endGame(); 
                  return; 
                }
              }
            }
          }

          // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –±–æ—Ç–∞-–æ—Ö–æ—Ä–æ–Ω—Ü—è
          updateBodyguardBot();

          // –û–±—Ä–æ–±–∫–∞ –±–æ–Ω—É—Å—ñ–≤
          bonuses = bonuses.filter(bonus => {
            bonus.life--;
            if (bonus.life <= 0) return false;
            
            if (player.x < bonus.x + bonus.size && player.x + player.size > bonus.x &&
                player.y < bonus.y + bonus.size && player.y + player.size > bonus.y) {
              
              if (bonus.type === 'points') {
                score += 100;
                updateCounters();
                createBonusParticles(bonus.x + bonus.size/2, bonus.y + bonus.size/2, '#ff0');
                consoleLog('+100 –æ—á–æ–∫!', 'success');
              } else if (bonus.type === 'time') {
                timeSec += 5;
                updateCounters();
                createBonusParticles(bonus.x + bonus.size/2, bonus.y + bonus.size/2, '#0ff');
                consoleLog('+5 —Å–µ–∫—É–Ω–¥!', 'success');
              } else {
                // Power-up –±–æ–Ω—É—Å–∏
                activatePowerup(bonus.type);
                createBonusParticles(bonus.x + bonus.size/2, bonus.y + bonus.size/2, bonus.color);
              }
              return false;
            }
            return true;
          });
        }

        for(let p of particles){
          p.x+=p.vx; p.y+=p.vy; p.life--;
        }
        particles=particles.filter(p=>p.life>0);

        for(let s of stars){
          s.y+=s.speed;
          if(s.y>height) s.y=0;
        }

        if(isGameOverAnim && particles.length===0){
          isGameOverAnim=false;
          showScreen('over');
          if(timeSec>best){
            best=timeSec; 
            localStorage.setItem('bestTime',best);
          }
          if(score>bestScore){
            bestScore=score;
            localStorage.setItem('bestScore',bestScore);
          }
          updateGameOverCounters();
          updateCounters();

          aiBot.speed = 0.4 + Math.min(2.5, timeSec * 0.01);
        }
      }
      
      function draw(){
        ctx.clearRect(0,0,width,height);

        for(let s of stars){
          ctx.fillStyle = 'white';
          ctx.globalAlpha = Math.random()*0.8+0.2;
          ctx.beginPath();
          ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
          ctx.fill();
        }
        ctx.globalAlpha=1;

        if(!isGameOverAnim){
          // –ö–æ–ª—ñ—Ä –≥—Ä–∞–≤—Ü—è –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –µ—Ñ–µ–∫—Ç—ñ–≤
          if(activeEffects.shield.active){
            ctx.fillStyle='#00ffff';
          } else if(activeEffects.speedBoost.active){
            ctx.fillStyle='#ffff00';
          } else {
            ctx.fillStyle='#0af';
          }
          ctx.fillRect(player.x,player.y,player.size,player.size);
        }

        ctx.fillStyle='#f44';
        for(let e of enemies) ctx.fillRect(e.x,e.y,e.size,e.size);
        
        // –ú–∞–ª—é–≤–∞–Ω–Ω—è AI –±–æ—Ç–∞
        if (botEnabled) {
          ctx.fillStyle = '#c00';
          ctx.fillRect(aiBot.x, aiBot.y, aiBot.size, aiBot.size);
        }
        
        // –ú–∞–ª—é–≤–∞–Ω–Ω—è –±–æ—Ç–∞-–æ—Ö–æ—Ä–æ–Ω—Ü—è
        if(bodyguardBot.active){
          ctx.fillStyle = '#00ff00';
          ctx.fillRect(bodyguardBot.x, bodyguardBot.y, bodyguardBot.size, bodyguardBot.size);
        }

        // –ú–∞–ª—é–≤–∞–Ω–Ω—è –±–æ–Ω—É—Å—ñ–≤
        for(let bonus of bonuses){
          ctx.fillStyle = bonus.color || (bonus.type === 'points' ? '#ff0' : '#0ff');
          ctx.globalAlpha = Math.max(0.3, bonus.life / 300);
          ctx.fillRect(bonus.x, bonus.y, bonus.size, bonus.size);
          ctx.globalAlpha = 1;
        }

        for(let p of particles){
          ctx.fillStyle=p.color;
          ctx.globalAlpha = Math.max(0,p.life/60);
          ctx.shadowBlur = p.glow||0;
          ctx.shadowColor = p.color;
          ctx.fillRect(p.x,p.y,3,3);
          ctx.globalAlpha=1;
          ctx.shadowBlur = 0;
        }

        if(joystick.active){
          ctx.strokeStyle='rgba(0,255,0,0.3)';
          ctx.lineWidth=2;
          ctx.beginPath();
          ctx.arc(joystick.x,joystick.y,40,0,Math.PI*2);
          ctx.stroke();
          ctx.fillStyle='rgba(0,255,0,0.4)';
          ctx.beginPath();
          ctx.arc(joystick.x+joystick.dx*30,joystick.y+joystick.dy*30,12,0,Math.PI*2);
          ctx.fill();
        }
      }

      function loop(){ update(); draw(); animationId=requestAnimationFrame(loop); }

      /* ------------------ –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –º—É–∑–∏–∫–∏ ------------------ */
      function playMenuMusic() {
        if (!menuMusicEnabled) {
          stopMenuMusic();
          return;
        }
        stopGameMusic();
        menuMusic.play().catch(e => {
          if (!musicAutoplayAttempted) {
            console.log('–ê–≤—Ç–æ–≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—É–∑–∏–∫–∏ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ, –±—É–¥–µ –≤–∫–ª—é—á–µ–Ω–æ –ø—Ä–∏ –≤–∑–∞—î–º–æ–¥—ñ—ó');
            musicAutoplayAttempted = true;
          }
        });
      }

      function playGameMusic() {
        if (!gameMusicEnabled) {
          stopGameMusic();
          return;
        }
        stopMenuMusic();
        gameMusic.play().catch(e => {
          if (!musicAutoplayAttempted) {
            console.log('–ê–≤—Ç–æ–≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—É–∑–∏–∫–∏ –≥—Ä–∏ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ');
            musicAutoplayAttempted = true;
          }
        });
      }

      function stopGameMusic() {
        gameMusic.pause();
        gameMusic.currentTime = 0;
      }

      function stopMenuMusic() {
        menuMusic.pause();
        menuMusic.currentTime = 0;
      }

      function stopAllMusic() {
        stopMenuMusic();
        stopGameMusic();
      }

      // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø—Ä–∏–º—É—Å–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫—É –º—É–∑–∏–∫–∏ –ø—Ä–∏ –≤–∑–∞—î–º–æ–¥—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
      function forcePlayMusic() {
        musicAutoplayAttempted = true;
        if (menu.style.display === 'flex' && menuMusicEnabled) {
          playMenuMusic();
        } else if (gameScreen.style.display === 'flex' && gameMusicEnabled && !isGamePaused) {
          playGameMusic();
        }
      }

      /* ------------------ –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å ------------------ */
      function openSettings() {
        settingsModal.style.display = 'flex';
      }

      function closeSettings() {
        settingsModal.style.display = 'none';
        saveSettings();
      }

      function saveSettings() {
        currentLanguage = languageSelect.value;
        menuMusicEnabled = menuMusicToggle.checked;
        gameMusicEnabled = gameMusicToggle.checked;
        vibrationEnabled = vibrationToggle.checked;
        
        localStorage.setItem('language', currentLanguage);
        localStorage.setItem('menuMusicEnabled', menuMusicEnabled);
        localStorage.setItem('gameMusicEnabled', gameMusicEnabled);
        localStorage.setItem('vibrationEnabled', vibrationEnabled);
        
        updateLanguage();
        
        // –ú–∏—Ç—Ç—î–≤–µ –≤–∏–º–∏–∫–∞–Ω–Ω—è/–≤–º–∏–∫–∞–Ω–Ω—è –º—É–∑–∏–∫–∏
        if (!menuMusicEnabled) {
          stopMenuMusic();
        } else if (menu.style.display === 'flex') {
          playMenuMusic();
        }
        
        if (!gameMusicEnabled) {
          stopGameMusic();
        } else if (gameScreen.style.display === 'flex' && !isGamePaused) {
          playGameMusic();
        }
      }

      function loadSettings() {
        const savedLanguage = localStorage.getItem('language');
        const savedMenuMusic = localStorage.getItem('menuMusicEnabled');
        const savedGameMusic = localStorage.getItem('gameMusicEnabled');
        const savedVibration = localStorage.getItem('vibrationEnabled');
        
        if (savedLanguage) {
          currentLanguage = savedLanguage;
          languageSelect.value = currentLanguage;
        }
        
        if (savedMenuMusic !== null) {
          menuMusicEnabled = savedMenuMusic === 'true';
          menuMusicToggle.checked = menuMusicEnabled;
        }
        
        if (savedGameMusic !== null) {
          gameMusicEnabled = savedGameMusic === 'true';
          gameMusicToggle.checked = gameMusicEnabled;
        }
        
        if (savedVibration !== null) {
          vibrationEnabled = savedVibration === 'true';
          vibrationToggle.checked = vibrationEnabled;
        }
      }

      /* ------------------ –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –ì–†–ò ------------------ */
      addEventListener('keydown',e=>{
        keys[e.key]=true;
        if(e.key === 'Escape' && isGameActive && !isGameOverAnim){ 
          togglePause();
        }
      });
      addEventListener('keyup',e=>{keys[e.key]=false;});

      canvas.addEventListener('touchstart',e=>{
        if(isGamePaused) return; 
        const t=e.touches[0]; joystick.active=true; joystick.x=t.clientX; joystick.y=t.clientY; joystick.dx=0; joystick.dy=0;
      });
      canvas.addEventListener('touchmove',e=>{
        if(!joystick.active || isGamePaused) return;
        const t=e.touches[0];
        const dx=t.clientX-joystick.x;
        const dy=t.clientY-joystick.y;
        const len=Math.hypot(dx,dy);
        const max=40;
        joystick.dx=(len>max?dx/len:dx/max);
        joystick.dy=(len>max?dy/len:dy/max);
      });
      canvas.addEventListener('touchend',()=>{joystick.active=false;});

      // –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –¥–ª—è –ø—Ä–∏–º—É—Å–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫—É –º—É–∑–∏–∫–∏
      document.addEventListener('click', forcePlayMusic);
      document.addEventListener('keydown', forcePlayMusic);
      document.addEventListener('touchstart', forcePlayMusic);

      // –ó—É–ø–∏–Ω–∫–∞ –º—É–∑–∏–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ –≤–∫–ª–∞–¥–∫–∏
      document.addEventListener('visibilitychange', () => {
        if (document.hidden) {
          stopAllMusic();
        } else {
          // –ü—Ä–∏ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—ñ –Ω–∞ –≤–∫–ª–∞–¥–∫—É - –≤—ñ–¥—Ç–≤–æ—Ä—é—î–º–æ –º—É–∑–∏–∫—É
          setTimeout(forcePlayMusic, 100);
        }
      });

      // –ó—É–ø–∏–Ω–∫–∞ –º—É–∑–∏–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ –≤—ñ–∫–Ω–∞
      window.addEventListener('beforeunload', stopAllMusic);

      /* ------------------ –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –ö–ù–û–ü–û–ö ------------------ */
      startBtn.addEventListener('click', () => { showScreen('game'); startGame(); });
      retryBtn.addEventListener('click', () => { showScreen('game'); startGame(); });
      menuBtn.addEventListener('click', () => { resetGameState(); showScreen('menu'); });
      pauseBtn.addEventListener('click', togglePause);
      resumeBtn.addEventListener('click', togglePause);
      pauseMenuBtn.addEventListener('click', () => { resetGameState(); showScreen('menu'); });
      botBtn.addEventListener('click', toggleBot);
      settingsBtn.addEventListener('click', openSettings);
      closeSettingsBtn.addEventListener('click', closeSettings);
      
      resetBtn.addEventListener('click', () => { 
        if(confirm('–í–∏ —Ç–æ—á–Ω–æ —Ö–æ—á–µ—Ç–µ —Å–∫–∏–Ω—É—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å?')){ 
          localStorage.removeItem('bestTime'); 
          localStorage.removeItem('bestScore');
          best=0; 
          bestScore=0;
          updateCounters();
          alert('–ü—Ä–æ–≥—Ä–µ—Å —Å–∫–∏–Ω—É—Ç–æ!'); 
        } 
      });

      const showHelpAlert = () => {
        const t = translations[currentLanguage];
        alert(currentLanguage === 'uk' ? 
`üéÆ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–æ –≥—Ä–∏

üïπ –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ: –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–∂–æ–π—Å—Ç–∏–∫ –¥–ª—è —Ä—É—Ö—É —Å–∏–Ω—å–æ–≥–æ –∫–≤–∞–¥—Ä–∞—Ç–∞.
‚å®Ô∏è –ù–∞ –ü–ö: —Å—Ç—Ä—ñ–ª–∫–∏ –∞–±–æ W/A/S/D. Esc –¥–ª—è –ü–∞—É–∑–∏.
üî• –ú–µ—Ç–∞: –ø—Ä–æ—Ç—Ä–∏–º–∞—Ç–∏—Å—è —è–∫–æ–º–æ–≥–∞ –¥–æ–≤—à–µ.
‚≠ê –ë–æ–Ω—É—Å–∏: 
  - –ñ–æ–≤—Ç—ñ: +100 –æ—á–æ–∫
  - –ë–ª–∞–∫–∏—Ç–Ω—ñ: +5 —Å–µ–∫—É–Ω–¥
  - –§—ñ–æ–ª–µ—Ç–æ–≤—ñ: Slow Motion (—Å–ø–æ–≤—ñ–ª—å–Ω—é—î –≤–æ—Ä–æ–≥—ñ–≤)
  - –ë—ñ—Ä—é–∑–æ–≤—ñ: Shield (–∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –æ–¥–Ω–æ–≥–æ —É–¥–∞—Ä—É –Ω–∞ 20—Å)
  - –ñ–æ–≤—Ç—ñ –≤–µ–ª–∏–∫—ñ: Speed Boost (–∑–±—ñ–ª—å—à—É—î —à–≤–∏–¥–∫—ñ—Å—Ç—å)

ü§ñ –ë–æ—Ç: —á–µ—Ä–≤–æ–Ω–∏–π –∫–≤–∞–¥—Ä–∞—Ç, —è–∫–∏–π –ø–µ—Ä–µ—Å–ª—ñ–¥—É—î –≥—Ä–∞–≤—Ü—è

üí° Power-up'–∏ –∑'—è–≤–ª—è—é—Ç—å—Å—è –∫–æ–∂–Ω—ñ 10 —Å–µ–∫—É–Ω–¥!` : 
`üéÆ Game Instructions

üïπ On phone: use joystick to move the blue square.
‚å®Ô∏è On PC: arrows or W/A/S/D. Esc for Pause.
üî• Goal: survive as long as possible.
‚≠ê Bonuses: 
  - Yellow: +100 points
  - Blue: +5 seconds
  - Purple: Slow Motion (slows enemies)
  - Teal: Shield (protection from one hit for 20s)
  - Large Yellow: Speed Boost (increases speed)

ü§ñ Bot: red square that chases the player

üí° Power-ups appear every 10 seconds!`);
      };

      // ------------------ –õ–û–ì–Ü–ö–ê –ö–û–ù–°–û–õ–Ü –¢–ê LONG-PRESS ------------------
      
      function getFullHTMLCode() {
          return "<!doctype html>\n" + document.documentElement.outerHTML;
      }

      function consoleLog(text,type='info'){
        const time=new Date().toLocaleTimeString();
        const el=document.createElement('div'); el.style.padding='3px 0';
        if(type==='error') el.style.color='#ff8080';
        else if(type==='success') el.style.color='#80ffaa';
        else el.style.color='#ccc';
        el.textContent=`[${time}] ${text}`; consoleBody.appendChild(el); consoleBody.scrollTop=consoleBody.scrollHeight;
      }
      
      function closeHelpModalHandler(){
          helpModal.style.display = 'none';
          if (helpTimeoutId) {
              clearTimeout(helpTimeoutId);
              helpTimeoutId = null;
          }
      }

      function showHelpModal(){
          if (helpTimeoutId) clearTimeout(helpTimeoutId);

          helpModal.style.display = 'block';

          helpTimeoutId = setTimeout(closeHelpModalHandler, 5000); 
      }

      function closeConsole(){
          consoleOverlay.style.display='none'; 
          consoleOverlay.setAttribute('aria-hidden','true');
      }

      function handleCommand(raw){
        if(!raw||raw.trim()==='') return;
        const parts=raw.trim().split(/\s+/), cmd=parts[0].toLowerCase(), args=parts.slice(1);
        consoleLog('> '+raw,'info');
        switch(cmd){
          case '/help':
            showHelpModal(); 
            break;
          case '/code':
            {
                const password = prompt('–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–æ–¥—É:'); 
                if (password === SECURE_PASSWORD) {
                    codePre.textContent = getFullHTMLCode(); 
                    codeModal.style.display = 'flex'; 
                    consoleLog('Access granted. Code shown.','success'); 
                } else {
                    consoleLog('Access denied. Incorrect password.','error');
                }
            }
            break;
          case '/god':{
            const mode=args[0]&&args[0].toLowerCase();
            if(mode==='on'){ godMode=true; consoleLog('God mode ON','success'); }
            else if(mode==='off'){ godMode=false; consoleLog('God mode OFF','success'); }
            else consoleLog('Usage: /god on|off','error');
            break;
          }
          case '/score':
            consoleLog(`–ü–æ—Ç–æ—á–Ω–∏–π —Ä–∞—Ö—É–Ω–æ–∫: ${score}`,'success');
            break;
          case '/time':
            consoleLog(`–ß–∞—Å –≥—Ä–∏: ${timeSec} —Å–µ–∫—É–Ω–¥`,'success');
            break;
          case '/clear':
            consoleBody.innerHTML = '';
            consoleLog('–ö–æ–Ω—Å–æ–ª—å –æ—á–∏—â–µ–Ω–∞','success');
            break;
          case '/enemies':
            consoleLog(`–ê–∫—Ç–∏–≤–Ω–∏—Ö –≤–æ—Ä–æ–≥—ñ–≤: ${enemies.length}`,'info');
            break;
          case '/bot':{
            const mode=args[0]&&args[0].toLowerCase();
            if(mode==='on'){ 
              botEnabled=true; 
              updateBotButton();
              consoleLog('–ë–æ—Ç —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π','success'); 
            }
            else if(mode==='off'){ 
              botEnabled=false; 
              updateBotButton();
              consoleLog('–ë–æ—Ç –≤–∏–º–∫–Ω–µ–Ω–∏–π','success'); 
            }
            else consoleLog('Usage: /bot on|off','error');
            break;
          }
          case '/bb':{
            const mode=args[0]&&args[0].toLowerCase();
            if(mode==='on'){ 
              bodyguardBot.active=true; 
              consoleLog('–ë–æ—Ç-–æ—Ö–æ—Ä–æ–Ω–µ—Ü—å —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π','success'); 
            }
            else if(mode==='off'){ 
              bodyguardBot.active=false; 
              consoleLog('–ë–æ—Ç-–æ—Ö–æ—Ä–æ–Ω–µ—Ü—å –≤–∏–º–∫–Ω–µ–Ω–∏–π','success'); 
            }
            else consoleLog('Usage: /bb on|off','error');
            break;
          }
          default: consoleLog('Unknown command. Type /help for assistance.','error');
        }
      }

      consoleSend.addEventListener('click', () => { 
        handleCommand(consoleInput.value); 
        consoleInput.value=''; 
        consoleInput.focus(); 
      });
      
      consoleInput.addEventListener('keydown', e => { 
        if(e.key==='Enter'){ 
          e.preventDefault(); 
          handleCommand(consoleInput.value); 
          consoleInput.value=''; 
        } 
      });
      
      closeConsoleBtn.addEventListener('click', closeConsole); 
      consoleBackBtn.addEventListener('click', closeConsole); 
      closeCodeModal.addEventListener('click', () => { codeModal.style.display='none'; }); 
      closeHelpModal.addEventListener('click', closeHelpModalHandler); 

      let holdTimer = null;
      const HOLD_MS = 2000; 

      function openConsole(){
        consoleOverlay.style.display = 'flex';
        consoleOverlay.setAttribute('aria-hidden','false');
        consoleInput.focus();
        consoleStatus.textContent = 'system active'; 
      }

      function startHoldTimer(e){
        e.preventDefault(); 
        if(holdTimer) clearTimeout(holdTimer);
        
        holdTimer = setTimeout(()=>{ 
          openConsole(); 
          holdTimer = null; 
          consoleLog('–ö–æ–Ω—Å–æ–ª—å –≤—ñ–¥–∫—Ä–∏—Ç–æ. –í–≤–µ–¥—ñ—Ç—å /help –¥–ª—è –¥–æ–≤—ñ–¥–∫–∏.','success'); 
        }, HOLD_MS);
      }

      function cancelHoldTimer(e){
        if(holdTimer){ 
          clearTimeout(holdTimer);
          if(e.type === 'mouseup' || e.type === 'touchend') {
            showHelpAlert(); 
          }
          holdTimer = null;
        }
      }

      howBtn.addEventListener('mousedown', startHoldTimer);
      howBtn.addEventListener('mouseup', cancelHoldTimer);
      howBtn.addEventListener('mouseleave', () => { 
        if(holdTimer) clearTimeout(holdTimer);
        holdTimer = null;
      });
      howBtn.addEventListener('touchstart', startHoldTimer, {passive:false});
      howBtn.addEventListener('touchend', cancelHoldTimer);

      /* ------------------ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è ------------------ */
      consoleStatus.textContent = 'system ready'; 
      
      // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
      loadSettings();
      
      // –°–ø—Ä–æ–±–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—É–∑–∏–∫–∏
      setTimeout(() => {
        if (menuMusicEnabled) {
          playMenuMusic();
        }
      }, 500);
      
      updateBotButton();
      updateCounters();
      updateLanguage();
      showScreen('menu');
      resize();
    })();
  </script>
</body>
</html>
